# Linux学习

### Linux的目录结构

Linux的目录结构是一个树形结构，linux只有一个顶级目录，称之为：根目录。

2、/在linux系统中表示

> * 出现在开头的/表示：根目录
> * 出现在后面的/表示：层次关系

#### linux命令入门

> * 命令行：即linux终端（Terminal），是一种命令提示符界面，以纯‘字符’的形式操作系统，可以使用各种字符化命令对系统发出操作指令。
> * 命令：即linux程序。一个命令就是一个liunx的程序。命令没有图形化界面，可以在命令行（终端中）提供字符化的反馈

无论是什么命令，用于什么用途，在linux中，命令有其通用的格式：

> command  [-options] [parameter]

* command: 命令本身
* -options：可选，非必填。命令的一些选项，可以通过选项控制命令的行为细节
* parameter：可选，非必填。命令的参数，多数用于命令的指向目标等

示例：

> ls -l /home/itheima ，ls是命令本身，-l 是选项，/home/itheima是参数
>
> 意思是以列表的形式，显示/home/itheima目录内的内容

##### ls命令

> ls [-a -l -h] [Linux路径]
>
> * -a -l -h 是可选项 
>
>   * -a表示all的意思，可以列出全部文件（包含隐藏的文件/文件夹），以.开头的，就是linux系统的隐藏文件/文件夹
>
>   * -l表示以列表的形式展示内容，
>
>   * -h表示易于阅读的形式，列出文件大小，如K，M，G
>
>     -h必须要搭配-l一起使用
>
> * linux路径是此命令的可选的参数

在命令行中，以平铺的形式，展示当前工作目录（默认home目录）下的内容（文件或文件夹）。每个用户在linux系统的专属目录，默认在：/home/用户名。linux命令行在执行命令的时候，需要一个工作目录，大爱命令行程序（终端）默认设置工作目录在用户的home目录。

##### cd命令 

cd来自：Change Directory

> cd [linux路径]
>
> * cd命令无需选项，只有参数，表示要切换到哪个目录下
> * cd命令直接执行，不写参数，表示回到用户的home目录

##### pwd命令

我们可以通过pwd命令，来查看当前所在的工作目录。pwd来自：Print Work Directory

> pwd
>
> * pwd命令，无选项，无参数，直接输入pwd即可

##### 相对路径和绝对路径

绝对路径：以根目录为起点，描述路径的一种写法，路径描述以/开头

相对路径：以当前目录为起点，描述路径的一种写法，路径描述无需以/开头

##### 特殊路径符：

> . 表示当前目录
>
> .. 表示上一级目录
>
> ~ 表示HOME目录

##### mkdir命令

mkdir来自：Make Directory

> mkdir [-p] linux路径
>
> * 参数必填，表示linux路径，即要创建的文件夹的路径
> * -p选项可选，表示自动创建不存在的父目录，使用于创建连续多层级的目录

注意：创建文件夹需要修改权限，请确保操作均在HOME目录内，不要在HOME外操作涉及到权限问题，HOME外无法成功，需要更多的权限管理知识。

##### touch命令

可以通过touch命令创建文件

> touch linux路径
>
> * touch命令无选项，参数必填，表示要创建的文件路径，相对、绝对、特殊路径符均可以使用

##### cat命令

准备好文件内容后，可以通过cat查看内容。

> cat linux路径
>
> * cat同样没有选项，只有必填参数，参数表示：被查看的文件路径，相对、绝对、特殊路径符都可以使用

##### more命令

more命令同样可以查看文件内容，同cat不同的是：

* cat是直接将内容全部显示出来
* more支持翻页，如果文件内容过多，可以一页页显示

> more linux路径
>
> * 同样没有选项，只有必填参数，参数表示：被查看的文件路径，相对、绝对、特殊路径符都可以使用

##### cp命令

产品命令可以用于复制文件/文件夹，cp命令来自：copy

> cp [-r] 参数1 参数2
>
> * -r 选项，可选，用于复制文件夹使用，表示递归
> * 参数1，linux路径，表示被复制的文件/文件夹
> * 参数2，linux路径，表示要复制去的地方

##### MV命令

mv命令可以用于移动文件/文件夹，mv来自：move

> mv 参数1 参数2
>
> * 参数1， linux路径，表示被移动的文件/文件夹
> * 参数2， linux路径，表示要移动到的地方，如果目标不存在，则进行改名，确保目标存在

##### rm命令

rm命令可用于删除文件、文件夹，来自：remove

> rm [-r -f] 参数1 参数2  .....  参数N
>
> * 同cp命令一样，-r用于删除文件夹
>
> * -f表示force，强制删除（不会弹出提示确认信息）
>
>   * 普通用户删除内容不会弹出提示，只有root管理员用户删除内容会有提示
>
>   * 所以一般普通用户用不到-f
>
> * 参数1、参数2、....、参数N表示要删除的文件/文件夹，空格隔开

##### which命令

  我们在前面学习的linux命令，其实它们的本体就是一个个二进制可执行文件，我们可以通过which命令，查看所使用的一系列命令的程序文件存放在哪里。

> which  要查找的命令

##### find命令

在linux系统中，我们可以通过find命令去搜索指定的文件。

> find 起始路径 -name ”被查找文件名“

###### find命令 - 通配符

根据语法，被查找文件名，支持使用通配符*来做模糊查询。

* 符号*表示通配符，即匹配任意内容（包括空），
* test*，表示匹配任何以test开头的内容
* *test，表示匹配任何以test结尾的内容
* `*test*`，表示匹配任何包含test的内容

基于通配符的含义，可以结合find命令做文件的模糊查询。

###### find命令 - 按文件大小查找文件

> find 起始路径 -size + - n[KMG]
>
> * +，-表示大于和小于
> * n表示大小数字
> * Kmg表示大小单位，k表示kb，M表示MB，G表示GB

##### grep命令

可以通过grep命令，从文件中通过关键字过滤文件行。

> grep [-n] 关键字 文件路径
>
> *  选项-n，可选，表示在结果中显示匹配的行的行号
> * 参数，关键字，必填，表示过滤的关键字，带有空格或其他特殊符号，建议使用”“将关键字包围起来
> * 参数，文件路径，必填，表示要过滤的内容的文件路径，可作为**内容输入端口**

##### wc命令

可以通过wc命令统计文件的行数，单词数量等

> wc [-c -m -l -w] 文件路径
>
> * 选项，-c，统计bytes数量
> * 选项，-m，统计字符数量
> * 选项，-l，统计行数
> * 选项，-w，统计单词数量
> * 参数，文件路径，被统计的文件，可作为内容输入端口

##### 管道符 |

管道符：|，管道符的含义是：将管道符左边的命令的结果，作为右边命令的输入

##### echo命令

可以使用echo命令在命令行内输出指定内容

> echo 输出的内容
>
> * 无需选项，只有一个参数，表示要输出的内容，复杂内容可以用“ “包围

##### 反引号`

我们可以通过将命令用反引号（通常也称为飘号）`将其包围，被反引号包围的内容，会被作为命令执行，而非普通字符。

##### 重定向符>和>>

* `>`，将左侧命令的结果，**覆盖**写入到符号右侧指定的文件中
* `>>`，将左侧命令的结果，**追加**写入到符号右侧指定的文件中

##### tail命令

使用tail命令，可以查看文件尾部内容，跟踪文件的最新更改

> tail [-f -num] linux路径
>
> * 参数，linux路径，表示被跟踪的文件路径
> * 选项，-f，表示持续跟踪
> * 选项，-num，表示查看尾部多少行，不填默认10行

#### vi\vim编辑器

##### 命令模式（command mode）

命令模式下，所敲的按键编辑器都理解为命令，以命令驱动执行不同的功能，此模型下，不能自由进行文本编辑。

如果需要通过vi\vim编辑器编辑文件，通过如下命令：

> vi 文件路径
>
> vim 文件路径
>
> * 如果文件路径表示的文件不存在，那么此命令会用于编辑新文件
> * 如果文件路径表示的文件存在，那么此命令用于编辑已有文件

##### 输入模式（insert mode）

也就是所谓的编辑模式、插入模式。此模式下，可以对文件内容进行自由编辑。

##### 底线命令模式（last line mode）

以：开始，通常用于文件的保存、退出。



 ### linux用户和权限

--------

#### root用户（超级管理员）

##### su和exit命令

su命令就是用于账户切换的系统命令，其来源：switch user

> su [-] [用户名]
>
> * `-`符号是可选的，表示是否在切换用户后加载环境变量
> * 参数：用户名，表示要切换的用户，用户名也可以省略，省略表示切换到root
> * 切换用户后，可以通过exit命令退回上个用户，也可以使用快捷键：ctrl+d
> * 使用普通用户，切换到其他用户**需要输入密码**，
> * 使用root用户切换到其他用户，**无需密码**

##### sudo命令

在我们得知root密码的时候，可以通过su命令切换到root得到最大权限，但是我们不建议长期使用root用户，避免带来系统损失、

我们可以使用sudo命令，为普通的命令授权，临时以root身份执行

> sudo 其他命令
>
> * 在其他命令之前，带上sudo，即可为这一条命令临时赋予root权限
> * 但是并不是所有的用户，都有权利使用sudo，我们**需要为普通用户配置sudo认证**

为普通用户配置sudo认证

* 切换到root用户，执行visudo，会自动通过vi编辑器打开：etc/sudoers
* 在文件的最后添加：用户名+ ALL=(ALL) NOPASSWD:ALL
* 最后通过wq保存
* 切换回普通用户
* 执行的命令，均以root运行

##### 用户、用户组

linux系统中可以：

* 配置多个用户
* 配置多个用户组
* 用户可以加入多个用户组中

linux中关于权限的管控级别有2个，分别是：

* 针对用户的权限控制
* 针对用户组的权限控制

##### 用户组管理

**以下命令徐root用户执行**

* 创建用户组

  groupadd 用户组名

* 删除用户组

  groupdel 用户组名

##### 用户管理

以下命令需root用户执行

* 创建用户

  useradd [-g -d] 用户名

  * 选项：-g指定用户的组，不指定-g，会创建同名组并自动加入，指定-g需要组已经存在，如已存在同名组，必须使用-g
  * 选项：-d指定用户HOME路径，不指定，HOME目录默认在：/home/用户名

* 删除用户

  userdel [-r] 用户名

  * 选项：-r，删除用户的HOME目录，不使用-r，删除用户时，HOME目录保留

* 查看用户所属组

  id [用户名]

  * 参数：用户名，被查看的用户，如果不提供则查看自身

* 修改用户所属组

  usermod -aG 用户组 用户名，将指定用户加入指定用户组
  
##### getent命令
使用getent命令，可以查看当前系统中有哪些用户
语法：`getent passwd`
一共有7份信息，分别是：
> 用户名：密码（x）：用户id：组id：描述信息（无用）：HOME目录：执行终端（默认bash）

语法：`getent group`
包含3份信息：

> 组名称：组认证（显示为x）：组id

#### 权限控制

##### 认知权限信息

![](F:\workspace\Note\image\Snipaste_2023-07-06_16-50-56.png)

* 序号1，表示文件、文件夹的权限控制信息
* 序号2，表示文件、文件夹的所属用户
* 序号3，表示文件、文件夹所属用户组

![](F:\workspace\Note\image\Snipaste_2023-07-06_16-54-38.png)

举例：drwxr-xr-x，表示；

* 这是一个文件夹，首字母d表示
* 所属用户的权限是：rwx
* 所属用户组的权限是：rx，无w
* 其他用户的权限是：rx，无w

##### chmod命令

我们可以使用chmod，修改文件、文件夹的权限信息。注意，只有文件，文件夹的所属用户或root用户可以修改。

语法：`chmod [-R] 权限 文件或文件夹`

* 选项：-R，对文件夹内的全部内容应用同样的操作

示例：

* `chmod u=rwx,g=rx,o=x hello.txt`将文件权限修改为：rwxr-x--x
  * 其中u表示user，g表示group，o表示other

* `chmod -R u=rwx,g=rx,o=x test`将文件夹test以及文件夹内全部内容权限设置为：rwxr-x--x

> 快捷写法：chmod 751 hello.txt

##### chown命令

使用chown命令，可以修改文件、文件夹的所属用户和用户组。普通用户无法修改所属为其他用户或组，所以此命令只适合于root用户执行

语法：`chown [-R] [用户] [:] [用户组] 文件或文件夹`

* 选项：-R，同chmod，对文件夹内应用全部
* 选项：用户，修改所属用户
* 选项：用户组，修改所属用户组
* ：用于分隔用户和用户组

示例：

* `chown root hello.txt`将hello.txt所属用户修改为root
* `chown :root hello.txt`将hello.txt诉说用户组修改为root
* `chown root:test hello.txt`将hello.txt所属用户修改为root，用户组修改为test
* `chown -R root test`将文件夹所属用户修改为root并对文件夹内全部内容应用



### linux的实用操作

------

#### 实用小技巧

##### Ctrl + c强制停止

* linux某些程序运行时，如果想强制停止他
* 命令输入错误时，

##### Ctrl + d退出或登出

* 可以退出账户的登录
* 或者退出某些特定程序的专属页面（不能退出vi/vim

##### 历史命令搜索

* 可以通过history，查看历史输入过的命令
* 可以通过：！命令前缀，自动执行上一次匹配前缀的命令

* 可以通过快捷键：Ctrl+r，输入内容去匹配历史命令

##### 光标移动快捷键

* ctrl+a，跳到命令开头
* ctrl+e，跳到命令结尾
* ctrl+键盘左键，向左跳一个单词
* ctrl+键盘右键，向右跳一个单词

##### 清屏

* 通过ctrl+l，可以清空终端内容
* 或通过clear得到同样效果

#### 软件安装

##### yum命令

yum：RPM包软件管理器，用于自动化安装配置linux软件，并可以自动解决依赖问题。（CentOS使用

语法：`yum [-y] [install | remove | search] 软件名`

* 选项：-y，自动确认，无需手动确认安装或卸载过程
* install：安装
* remove：卸载
* search：搜索

##### apt命令-扩展

语法：`apt [-y] [install | remove | search] 软件名`

用法和yum一样，同样需要root权限

#### systemctl

##### systemctl命令

linux很多软件（内置或第三方）均支持使用systemctl命令控制：启动，停止，开机自启。能被systemctl管理的软件，也称为：服务

语法：`systemctl start | stop | status | enable | disable 服务名`

* start：启动
* stop：关闭
* status：查看状态
* enable：开启开机自启动
* disable：关闭开机自启动

系统内置的服务比较多，比如：

* NetworkManager，主网络服务
* network，副网络服务
* firewalld，防火墙服务
* sshd，ssh服务

（wsl使用 `service ufw start | stop | status | enable | disable 服务名` 

#### 软连接

##### ln命令创建软连接

在系统中创建软连接，可以将文件、文件夹链接到其他位置。

类似windows中的快捷方式

语法：`ln -s 参数1 参数2`

* -s，创建软连接
* 参数1：被链接的文件或文件夹
* 参数2：要链接去的目的地

实例：

* ln -s /etc/yum.conf ~/yum.conf

#### 日期、时区

##### date命令

通过date命令可以在命令行中查看系统的时间

语法：`date [-d] [+格式化字符串]`

* -d 按照给定的字符串显示日期，一般用于日期计算
* 格式化字符串：通过特定的字符串标记，来控制显示的日期格式
  * %Y 年
  * %y 年份后两位数字
  * %m 月份
  * %d 日
  * %H 小时
  * %M 分钟
  * %S 秒
  * %s 自 1970-01-01 00:00:00 UTC 到现在的秒数

![](F:\workspace\Note\image\Snipaste_2023-07-07_16-02-10.png)

* 其中支持的时间标记为：
  * year
  * month
  * day
  * hour
  * minute
  * second

##### 修改linux时区

使用root权限，执行如下命令，修改时区为东八区

``` sh
rm -f /etc/localtime
sduo ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtim
```

将系统自带的localtime文件删除，并将/user/share/zoneinfo/Asia/Shanghai文件链接为localtime文件即可

##### ntp程序

我们可以通过ntp程序自动校准系统时间

安装ntp：yum -y install ntp

启动并设置开机自启

* systemctl start ntpd
* systemctl enable ntpd

当ntpd启动后会定期帮助我们联网校准系统的时间

也可以手动校准：`ntpdate -u ntp.aliyun.com`通过阿里云提供的服务网址配合ntpdate命令自动校准

#### ip地址、主机名

##### ip地址

通过ifconfig查看本机ip地址

##### 特殊ip地址

* 127.0.0.1，代指本机
* 0.0.0.0，特殊地址
  * 可以用于代指本机
  * 可以在端口绑定中用来确认绑定关系
  * 在一些ip地址限制中，表示所有ip的意思，如放行规则设置0.0.0.0，表示允许任意ip访问

##### 主机名

![](F:\workspace\Note\image\Snipaste_2023-07-07_16-26-40.png)

##### 在linux中修改主机名

* 可以通过hostname查看主机名
* 可以使用hostnamectl set-hostname 主机名，修改主机名

##### 配置主机名映射

比如，我们在finalshell是通过ip地址连接到linux服务器，那么可以通过域名（主机名）连接呢？

可以，我们只需要在windows系统的：`C:\Windows\System32\drivers\etc\hosts`文件中配置记录即可

##### 在VMware Workstation中配置固定ip

配置固定ip需要2个大步骤：

1、在vm中配置ip地址网关和网段（ip地址的范围

2、在linux中手动修改配置文件，固定ip

* 使用vim编辑/etc/sysconfig/network-scrpts/ifcfg-ens33文件，填入如下内容

  ![](F:\workspace\Note\image\Snipaste_2023-07-07_16-38-32.png)

* 执行：systemctl restart network

#### 网络传输

##### ping命令

可以通过ping命令，检查指定的网络服务器是否是联通状态

语法：`ping [-c num] ip or hostname`

* 选项：-c，检查次数，不使用-c，将无限次查询
* 参数：ip或主机名，被检查服务器的ip或主机名

##### wget命令

wget是非交换式的文件下载器，可以在命令行内下载网络文件

语法：`wget [-b] url`

* 选项：-b，可选，后台下载，会将日志写入当前工作目录的wget-log文件
* 参数：url，下载链接

##### curl命令

curl可以发送http网络请求，可用于：下载文件，获取信息等

语法：`curl [-O] url`

* 选项：-O,用于下载文件，当URL是下载链接时，可以使用此选项保存文件
* 参数：url，要发起请求的网络地址

##### 端口

![](F:\workspace\Note\image\Snipaste_2023-07-07_16-54-26.png)

![](F:\workspace\Note\image\Snipaste_2023-07-07_16-55-10.png)

##### 查看端口占用

可以通过linux命令去查看端口的占用情况

使用nmap命令吗，安装nmap：yum -y install nmap

* 可以通过netstat命令查看指定端口占用情况

语法：`netstat -anp|grep 端口号`，安装netstat：yum -y install net-tools

#### 进程管理

##### 进程

程序运行在操作系统中，是被操作系统所管理的。为管理运行的程序，每个程序在运行时，会被操作系统注册为系统的一个进程，并且会分配一个独有的进程ID（进程号

##### 查看进程

可以通过ps命令查看linux系统中的进程信息

语法：`ps [-e -f]`

* 选项：-e，显示出全部的进程
* 选项：-f，以完全格式化的形式展示信息（展示全部信息

![](F:\workspace\Note\image\Snipaste_2023-07-07_17-13-41.png)

##### 查看指定进程

使用管道符加grep

##### 关闭进程

语法：`kill [-9] 进程id`

* 选项：-9，表示强制关闭进程。

#### 主机状态

##### 查看系统资源占用

可以通过top命令查看cpu，内存使用情况，默认每5秒刷新一次，

语法：直接输入top，按q或者ctrl+c退出

![](F:\workspace\Note\image\Snipaste_2023-07-07_17-21-08.png)

![](F:\workspace\Note\image\Snipaste_2023-07-07_17-23-33.png)

![](F:\workspace\Note\image\Snipaste_2023-07-07_17-25-03.png)
